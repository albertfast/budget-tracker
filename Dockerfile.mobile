FROM node:18-alpine

WORKDIR /app

# Copy package files
COPY package*.json ./

# Install dependencies including @expo/ngrok
RUN npm install && npm install -g @expo/ngrok@^4.1.0

# Copy the rest of the application
COPY . .

# Expose the ports
EXPOSE 19000 19001 19002

# Default command
CMD ["npx", "expo", "start", "--tunnel"]